{"ast":null,"code":"!function (e, t) {\n  if (\"object\" === typeof exports && \"object\" === typeof module) module.exports = t();else if (\"function\" === typeof define && define.amd) define([], t);else {\n    var n = t();\n\n    for (var i in n) (\"object\" === typeof exports ? exports : e)[i] = n[i];\n  }\n}(this, function () {\n  return function (e) {\n    function t(i) {\n      if (n[i]) return n[i].exports;\n      var r = n[i] = {\n        i: i,\n        l: !1,\n        exports: {}\n      };\n      return e[i].call(r.exports, r, r.exports, t), r.l = !0, r.exports;\n    }\n\n    var n = {};\n    return t.m = e, t.c = n, t.d = function (e, n, i) {\n      t.o(e, n) || Object.defineProperty(e, n, {\n        configurable: !1,\n        enumerable: !0,\n        get: i\n      });\n    }, t.n = function (e) {\n      var n = e && e.__esModule ? function () {\n        return e.default;\n      } : function () {\n        return e;\n      };\n      return t.d(n, \"a\", n), n;\n    }, t.o = function (e, t) {\n      return Object.prototype.hasOwnProperty.call(e, t);\n    }, t.p = \"\", t(t.s = 1);\n  }([function (e, t, n) {\n    \"use strict\";\n\n    function i(e, t, n) {\n      return t in e ? Object.defineProperty(e, t, {\n        value: n,\n        enumerable: !0,\n        configurable: !0,\n        writable: !0\n      }) : e[t] = n, e;\n    }\n\n    n.d(t, \"e\", function () {\n      return o;\n    }), n.d(t, \"a\", function () {\n      return a;\n    }), n.d(t, \"f\", function () {\n      return u;\n    }), n.d(t, \"c\", function () {\n      return s;\n    }), n.d(t, \"b\", function () {\n      return c;\n    }), n.d(t, \"d\", function () {\n      return f;\n    });\n    var r,\n        o = [\"user\", \"environment\"],\n        a = {\n      USER: \"user\",\n      ENVIRONMENT: \"environment\"\n    },\n        u = [\"jpg\", \"png\"],\n        s = {\n      PNG: \"png\",\n      JPG: \"jpg\"\n    },\n        c = (r = {}, i(r, \"jpg\", \"image/jpeg\"), i(r, \"png\", \"image/png\"), r),\n        f = {\n      audio: !1,\n      video: !0\n    };\n  }, function (e, t, n) {\n    e.exports = n(2);\n  }, function (e, t, n) {\n    \"use strict\";\n\n    function i(e, t) {\n      if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n    }\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    }), n.d(t, \"FACING_MODES\", function () {\n      return c;\n    }), n.d(t, \"IMAGE_TYPES\", function () {\n      return f;\n    });\n\n    var r = n(3),\n        o = n(5),\n        a = function () {\n      function e(e, t) {\n        for (var n = 0; n < t.length; n++) {\n          var i = t[n];\n          i.enumerable = i.enumerable || !1, i.configurable = !0, \"value\" in i && (i.writable = !0), Object.defineProperty(e, i.key, i);\n        }\n      }\n\n      return function (t, n, i) {\n        return n && e(t.prototype, n), i && e(t, i), t;\n      };\n    }(),\n        u = r.a.IMAGE_TYPES.PNG,\n        s = function () {\n      function e(t) {\n        i(this, e), this.videoElement = t, this.stream = null, this.numberOfMaxResolutionTry = 1, this.settings = null, this.windowURL = r.a.getWindowURL(), this.mediaDevices = r.a.getNavigatorMediaDevices();\n      }\n\n      return a(e, [{\n        key: \"_getStreamDevice\",\n        value: function (e, t) {\n          var n = this;\n          return new Promise(function (i, o) {\n            var a = r.a.getIdealConstraints(e, t);\n            n.mediaDevices.getUserMedia(a).then(function (e) {\n              n._gotStream(e), i(e);\n            }).catch(function (e) {\n              o(e);\n            });\n          });\n        }\n      }, {\n        key: \"_getStreamDeviceMaxResolution\",\n        value: function (e) {\n          var t = this,\n              n = r.a.getMaxResolutionConstraints(e, this.numberOfMaxResolutionTry);\n\n          if (null == n) {\n            var i = {};\n            return this._getStreamDevice(e, i);\n          }\n\n          return new Promise(function (i, r) {\n            t.mediaDevices.getUserMedia(n).then(function (e) {\n              t._gotStream(e), i(e);\n            }).catch(function (n) {\n              var i = n.name,\n                  r = n.constraint,\n                  o = n.message;\n              console.error(i + \" \" + r + \" \" + o), setTimeout(function () {\n                t.numberOfMaxResolutionTry += 1, t._getStreamDeviceMaxResolution(e);\n              }, 20);\n            });\n          });\n        }\n      }, {\n        key: \"_setVideoSrc\",\n        value: function (e) {\n          if (\"srcObject\" in this.videoElement) this.videoElement.srcObject = e;else {\n            var t = this.windowURL.createObjectURL(e);\n            this.videoElement.src = t;\n          }\n        }\n      }, {\n        key: \"_setSettings\",\n        value: function (e) {\n          this.settings = null, e && (this.settings = this.stream.getTracks()[0].getSettings());\n        }\n      }, {\n        key: \"_gotStream\",\n        value: function (e) {\n          this.stream = e, this._setSettings(e), this._setVideoSrc(e);\n        }\n      }, {\n        key: \"getCameraSettings\",\n        value: function () {\n          return this.settings;\n        }\n      }, {\n        key: \"startCamera\",\n        value: function (e, t) {\n          var n = this;\n          return this.stopCamera().then(function () {}).catch(function () {}).then(function () {\n            return n._getStreamDevice(e, t);\n          });\n        }\n      }, {\n        key: \"startCameraMaxResolution\",\n        value: function () {\n          var e = this,\n              t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};\n          return this.stopCamera().then(function () {}).catch(function () {}).then(function () {\n            return e._getStreamDeviceMaxResolution(t);\n          });\n        }\n      }, {\n        key: \"getDataUri\",\n        value: function (e) {\n          var t = {\n            sizeFactor: void 0 === e.sizeFactor ? o.c : e.sizeFactor,\n            imageType: void 0 === e.imageType ? u : e.imageType,\n            imageCompression: void 0 === e.imageCompression ? o.a : e.imageCompression,\n            isImageMirror: void 0 === e.isImageMirror ? o.b : e.isImageMirror\n          };\n          return r.a.getDataUri(this.videoElement, t);\n        }\n      }, {\n        key: \"stopCamera\",\n        value: function () {\n          var e = this;\n          return new Promise(function (t, n) {\n            e.stream && (e.stream.getTracks().forEach(function (e) {\n              e.stop();\n            }), e.videoElement.src = \"\", e.stream = null, e._setSettings(null), t()), n(Error(\"no stream to stop!\"));\n          });\n        }\n      }]), e;\n    }(),\n        c = r.a.FACING_MODES,\n        f = r.a.IMAGE_TYPES;\n\n    t.default = s;\n  }, function (e, t, n) {\n    \"use strict\";\n\n    function i(e, t) {\n      if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n    }\n\n    var r = n(4),\n        o = n(0),\n        a = function () {\n      function e(e, t) {\n        for (var n = 0; n < t.length; n++) {\n          var i = t[n];\n          i.enumerable = i.enumerable || !1, i.configurable = !0, \"value\" in i && (i.writable = !0), Object.defineProperty(e, i.key, i);\n        }\n      }\n\n      return function (t, n, i) {\n        return n && e(t.prototype, n), i && e(t, i), t;\n      };\n    }(),\n        u = function () {\n      function e() {\n        i(this, e);\n      }\n\n      return a(e, null, [{\n        key: \"getDataUri\",\n        value: function (e, t) {\n          var n = t.sizeFactor,\n              i = t.imageType,\n              o = t.imageCompression,\n              a = t.isImageMirror,\n              u = e.videoWidth,\n              s = e.videoHeight,\n              c = Object(r.b)(u, s, n),\n              f = c.imageWidth,\n              d = c.imageHeight,\n              l = document.createElement(\"canvas\");\n          l.width = f, l.height = d;\n          var g = l.getContext(\"2d\");\n          return a && g.setTransform(-1, 0, 0, 1, l.width, 0), g.drawImage(e, 0, 0, f, d), Object(r.a)(l, i, o);\n        }\n      }, {\n        key: \"getWindowURL\",\n        value: function () {\n          return window.URL || window.webkitURL || window.mozURL || window.msURL;\n        }\n      }, {\n        key: \"getNavigatorMediaDevices\",\n        value: function () {\n          var e = null,\n              t = !(!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia),\n              n = !(!navigator.mozGetUserMedia && !navigator.webkitGetUserMedia);\n          if (t) e = navigator.mediaDevices;else if (n) {\n            var i = navigator.mozGetUserMedia || navigator.webkitGetUserMedia,\n                r = {\n              getUserMedia: function (e) {\n                return new Promise(function (t, n) {\n                  i.call(navigator, e, t, n);\n                });\n              }\n            };\n            e = Object.assign(i, r);\n          }\n          return e;\n        }\n      }, {\n        key: \"isSupportedFacingMode\",\n        value: function () {\n          return e.getNavigatorMediaDevices().getSupportedConstraints().facingMode;\n        }\n      }, {\n        key: \"getIdealConstraints\",\n        value: function (e, t) {\n          var n = {\n            audio: !1,\n            video: {}\n          };\n          if (Object(r.c)(e, t)) return o.d;\n          var i = navigator.mediaDevices.getSupportedConstraints();\n          return i.width && i.height && i.facingMode ? (e && o.e.includes(e) && (n.video.facingMode = e), t && t.width && (n.video.width = t.width), t && t.height && (n.video.height = t.height), n) : (console.error(\"Constraint width height or facingMode not supported!\"), o.d);\n        }\n      }, {\n        key: \"getMaxResolutionConstraints\",\n        value: function () {\n          var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n              n = arguments[1],\n              i = e.getIdealConstraints(t),\n              r = [{\n            width: {\n              min: 640\n            }\n          }, {\n            width: {\n              min: 800\n            }\n          }, {\n            width: {\n              min: 900\n            }\n          }, {\n            width: {\n              min: 1024\n            }\n          }, {\n            width: {\n              min: 1080\n            }\n          }, {\n            width: {\n              min: 1280\n            }\n          }, {\n            width: {\n              min: 1920\n            }\n          }, {\n            width: {\n              min: 2560\n            }\n          }, {\n            width: {\n              min: 3840\n            }\n          }];\n          if (n >= r.length) return null;\n          var o = r.slice(0, -n);\n          return i.video.advanced = o, i;\n        }\n      }, {\n        key: \"FACING_MODES\",\n        get: function () {\n          return o.a;\n        }\n      }, {\n        key: \"IMAGE_TYPES\",\n        get: function () {\n          return o.c;\n        }\n      }]), e;\n    }();\n\n    t.a = u;\n  }, function (e, t, n) {\n    \"use strict\";\n\n    function i(e, t) {\n      if (!(t >= 0 && t <= 1)) throw new Error(t + \" is invalid imageCompression, choose between: [0, 1]\");\n      if (!c.f.includes(e)) throw new Error(e + \" is invalid imageType, choose between: \" + c.f.join(\", \"));\n      return !0;\n    }\n\n    function r(e, t) {\n      var n = {};\n\n      try {\n        i(e, t), n.imageType = e, n.imageCompression = t;\n      } catch (e) {\n        console.error(e), console.error(\"default value of \" + c.c.PNG + \" is used\"), n.imageType = c.c.PNG, n.imageCompression = null;\n      }\n\n      return n;\n    }\n\n    function o(e, t, n) {\n      var i = e * parseFloat(n);\n      return {\n        imageWidth: i,\n        imageHeight: t / (e / i)\n      };\n    }\n\n    function a(e, t, n) {\n      return r(t, n).imageType === c.c.JPG ? n ? e.toDataURL(c.b[c.c.JPG], n) : e.toDataURL(c.b[c.c.JPG]) : e.toDataURL(c.b[t]);\n    }\n\n    function u(e) {\n      if (\"object\" === (\"undefined\" === typeof e ? \"undefined\" : f(e))) for (var t in e) if (e.hasOwnProperty(t)) return !1;\n      return !0;\n    }\n\n    function s(e, t) {\n      return !(e || t && !u(t));\n    }\n\n    t.b = o, t.a = a, t.c = s;\n    var c = n(0),\n        f = \"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator ? function (e) {\n      return typeof e;\n    } : function (e) {\n      return e && \"function\" === typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? \"symbol\" : typeof e;\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    n.d(t, \"c\", function () {\n      return i;\n    }), n.d(t, \"a\", function () {\n      return r;\n    }), n.d(t, \"b\", function () {\n      return o;\n    });\n    var i = 1,\n        r = null,\n        o = !1;\n  }]);\n});","map":null,"metadata":{},"sourceType":"script"}